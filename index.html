<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내용 점검 도구</title>
    <link rel="stylesheet" href="style.css"> 
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <h1>내용 점검 도구</h1>
    
    <div id="top-controls">
        <div id="file-management-section" class="control-group">
            <div id="file-upload-controls">
                <label for="fileInput">📁 파일 업로드 (Excel/CSV)</label>
                <input type="file" id="fileInput">
                <button id="loadDataBtn">데이터 로드 및 초기화</button>
                <label id="fileNameDisplay" class="m_filename">현재 파일: 없음</label>
            </div>
        </div>
        
        <div id="action-buttons-section" class="control-group">
            <button id="saveCsvBtn">CSV 저장</button>
        </div>
    </div>
    
    <div id="main-settings">
        <div id="left-settings-group" class="control-section">
            <button id="toggleFilterBtn" class="detail-toggle-btn">
				데이터 필터 설정 <span id="filterToggleIcon">▼</span>
			</button>
            <div id="dynamicFilterWrapper">
				<div id="dynamic-filter-container" class="control-group">
				</div>
				<div id="action-buttons-section" style="text-align: right">
				    <button id="checkBtn">검증하기</button>
				</div>
			</div>
            
            <div id="display-column-group" class="control-group"> 
				<button id="toggleColumnsBtn" class="detail-toggle-btn">
					표시할 컬럼 선택<span id="ColumnsToggleIcon">▶</span>
				</button>
                <div id="displayColumns" class="checkbox-scroll-area">
                </div>
            </div>
        </div>
        
        <div id="check-type-group" class="control-section">
            <label>검증할 오류 선택 및 상세 설정</label>
            <div class="radio-option-group">
                <input type="radio" id="radioGradeCheck" name="checkType" value="gradeCheck" checked>
                <label for="radioGradeCheck">점수 → 등급 검증</label>
                <div id="gradeOptions" class="option-details">
                    <div class="select-pair">
						점수 컬럼:<select id="scoreColumn" disabled ></select>
					</div>
					<div class="select-pair">
						등급 컬럼:<select id="gradeColumn" disabled ></select>
					</div>
                </div>
            </div> 
            <div class="radio-option-group">
                <input type="radio" id="radioNotNull" name="checkType" value="notNull">
                비어있는지 확인
                <div id="nullOptions" class="option-details">
                    대상 컬럼: <select id="nullColumn"></select>
                </div>
            </div>
			<div class="radio-option-group">
                <input type="radio" id="radioLimit" name="checkType" value="limitCheck">
                등급 제한 검증
				<div id="limitOptions" class="option-details">
					평가 유형 선택:<select id="limitTypeSelect">
						<option value="none" selected disabled>--- 선택 ---</option>
						<option value="RE1">상대평가1 (A그룹 30%, B그룹 80%)</option>
						<option value="RE2">상대평가2 (A그룹 50%)</option>
						<option value="passfail">패논패 (P/NP)</option>
					</select>
					<button id="toggleCustomLimitBtn">
						직접 설정하기<span id="customLimitIcon">▶</span>
					</button>
					<br>
					<div id="customLimitSettings">
						<p><strong>그룹별 제한 비율 (%)</strong></p>
						<div id="customLimitList">
							</div>
						<div class="input-add-group">
							그룹: <select id="limitGroup">
								<option value="A_Group">A그룹 (A+, A0)</option>
								<option value="B_Group">B그룹 (B+, B0)</option>
								<option value="Other_Group">그 외 그룹(나머지)</option>
							</select>
							 비율 (%): <input type="number" id="limitValue" min="0" max="100" placeholder="0 ~ 100">
							<button id="addLimitBtn">추가</button>
						</div>
					</div>
				</div>
            </div>
        </div>
    </div>
    
    <div id="result-container">
        <div id="summary-and-filter-bar">
            <label id="summaryPanel"></label>
            <button id="toggleDistributionBtn" class="detail-toggle-btn">
                등급 분포 자세히 보기 <span id="distributionToggleIcon">▼</span>
            </button>
            <div id="filter-controls">
                <label for="errorToggle">🚨 오류 행만 보기</label>
                <label class="toggle-switch">
                    <input type="checkbox" id="errorToggle"> <span class="slider round"></span>
                </label>
            </div>
        </div>
        <div id="gradeDistributionDetail" class="distribution-hidden"></div>
		<div class="table-wrapper">
			<table id="resultTable">
				<thead>
					<tr id="headerRow"></tr> 
				</thead>
				<tbody></tbody> 
			</table>
		</div>
	</div>
    
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="기본값.js"></script>
    <script src="script.js"></script>
</body>
</html>
